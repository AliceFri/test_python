### 1. 文件系统的基本组成

    每个文件会分配两个数据结构： 索引节点 和 目录项

    索引节点：inode 记录文件的元信息，比如inode编号， 文件大小， 访问权限等
        索引节点与文件一一对应，也被存储在硬盘中

    目录项： dentry, 记录文件的名字， 索引节点指针， 以及与其他目录项的层级关联关系
        目录项由内核维护，不存放于磁盘，而是缓存在内存

    磁盘读写的最小单位是扇区， linux一次性读写8个扇区 4KB


#### 1.1  磁盘组成

    超级块： 存储文件系统的详细信息，  块个数，块大小，空闲块等
    索引节点区：  存储索引节点
    数据块区：  存储文件或目录数据

#### 1.2 虚拟文件系统

    VFS 定义了一组所有文件系统都支持的数据结构和标准接口，
    这样程序员不需要了解文件系统的工作原理，只需要了解 VFS 提供的统一接口即可。

### 2. 文件的使用

    lve

### 3. 文件的存储

    连续空间存放（读写效率高，容易产生碎片，文件长度不容易扩展）
    非连续空间存放
        链表方式/索引方式/链式索引块  （存储索引会有开销）

### 4. 空闲空间管理

    空闲表法： 表内容包括空闲区的第一个块号和该空闲区的块个数， 这种方式是连续分配的

    空闲链表法： 使用「链表」的方式来管理空闲空间

    前面两种都不适合大型文件系统，因为空闲表或空闲链表占用空间


    位图法： 在 Linux 文件系统就采用了位图的方式来管理空闲空间，不仅用于数据空闲块的管理，
    还用于 inode 空闲块的管理，因为 inode 也是存储在磁盘的，自然也要有对其管理。

### 5. 目录的存储
    

### 6. 软链接和硬链接
    硬链接是多个目录项中的「索引节点」指向一个文件 （只有删除文件所有硬链接和文件，文件才能被删除）
    
    软链接相当于重新创建一个文件，这个文件有独立的 inode，但是这个文件的内容是另外一个文件的路径
    访问软链接实际上是访问到了另一个文件（源文件被删了，软链接会失效）